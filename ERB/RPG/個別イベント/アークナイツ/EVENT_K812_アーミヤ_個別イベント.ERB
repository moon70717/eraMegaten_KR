;-------------------------------------------------
;アーミヤ個人イベント
;-------------------------------------------------
@INDIVIDUAL_EVENT_K812, ARG, ARG:1 = 0, ARG:2 = -1
#LOCALSIZE 1
#LOCALSSIZE 1
#DIM 導入フラグ
#DIM 현개인이벤트버전 = 100
;ARG:0　キャラ番号
;ARG:1　関数種類　1,開放条件　2,タイトル　3,イベント
;ARG:2　イベント番号（0～63まで）

SELECTCASE ARG:2
CASE 0
	;解放条件
	IF ARG:1 == 1
		;SIF CFLAG:ARG:전투참가불가능 > 0
		;	RETURN 0
		;アークナイツ版の条件はこっち
		IF CSTR:ARG:종족명 == "카우투스"
			IF 아미야개인이벤트버전 < 현개인이벤트버전 && GETBIT(이벤트플래그:19:19, 9) != 1
				RETURN 1
			ELSE
				IF CFLAG:ARG:이자리에없는플래그 > 0
					RETURN 0
				;ELSEIF BASE:MASTER:LV < 30
				;	RETURN 0
				ELSE
					RETURN 1
				ENDIF
			ENDIF
		ENDIF
	ELSEIF ARG:1 == 2
	;タイトル
		IF CSTR:ARG:종족명 == "카우투스"
			IF 아미야개인이벤트버전 < 현개인이벤트버전 && GETBIT(이벤트플래그:19:19, 9) != 1
				RESULTS = （중요）데이터 리셋:아미야
			ELSE
				IF GETBIT(CFLAG:ARG:개별이벤트개방, ARG:2)
					;タイトル
					RESULTS = 스킬 훈련：아미야
				ELSE
					;未開放時のタイトル（解放条件を入れておく）
					RESULTS = (%CALLNAME:ARG%의 가입으로 해방)
				ENDIF
			ENDIF
		ENDIF
	;イベント
	ELSEIF ARG:1 == 3
		IF CSTR:ARG:종족명 == "카우투스"
			IF 아미야개인이벤트버전 < 현개인이벤트버전 && !GETBIT(CFLAG:ARG:개별이벤트개방, ARG:2)
				PRINTL
				PRINTL ※개인 이벤트 버전이 업데이트되어、스킬 강화 및 승화 진행도가 초기화됩니다
				PRINTW 　이에 따라、강화에 사용된 아이템이 반환됩니다
				PRINTL
				PRINTL ※또한、아이템 반납 시、주회 보너스의
				PRINTL 『무구 아이템 인계』『방어구 아이템 인계』
				PRINTW 　등을 선택하지 않은 경우、해당 종류의 아이템이 반환되지 않는 점 유의하시기 바랍니다。
				PRINTL
				PRINTW 초기화를 실시합니까？
				CALL INPUT_YN
				SELECTCASE RESULT
					CASE 0
						CALL PU_SKILL_ENHANCE_MATERIAL_ROLLBACK_K812,ARG
						아미야개인이벤트버전 = 현개인이벤트버전
						RETURN 0
					CASE 1
						RETURN 0
				ENDSELECT
			ELSE
				$INDIVIDUAL_EVENT_K812_GOTO
				CUSTOMDRAWLINE =
				IF 導入フラグ == 0 
					導入フラグ = 1
					PRINTFORMW %CALLNAME:ARG%의 스킬 강화를 위해、훈련실을 찾았다。
					PRINTFORMW 여기서는 %CALLNAME:ARG%의 스킬을 강화、변경할 수 있다。
					PRINTL
					PRINTW 단、스킬 강화에는 특수한 재료가 필요하다。찾는게 힘든 물건들 뿐인니、꾸준히 모으자。
					IF 현개인이벤트버전 > 아미야개인이벤트버전
						PRINTL
						PRINTL ※개인 이벤트 버전이 업데이트되어、스킬의 강화와 승화의 진행도가 초기화가 가능해집니다
						PRINTL 　초기화시、강화에 사용된 아이템이 반환됩니다
						PRINTW 　초기화를 하지 않으면、예기치 못한 문제가 발생할 수 있으므로、초기화하는 것을 강력히 추천합니다
						PRINTL
						PRINTL ※또한、아이템 반납 시、주회 보너스의
						PRINTL 『무구 아이템 인계』『방어구 아이템 인계』
						PRINTW 　등을 선택하지 않은 경우、해당 종류의 아이템이 반환되지 않는 점 유의하시기 바랍니다。
						PRINTL
					ENDIF
				ENDIF
				PRINTL
				PRINTFORML 자、어떻게 할까？
				PRINTL
				PRINTL
				PRINTFORML [0] 스킬을 변경한다
				PRINTFORML [1] 승화 의식을 한다
				PRINTFORML [2] 전용기를 리셋한다
				IF 현개인이벤트버전 > 아미야개인이벤트버전
					PRINTFORML [3] ！ 개인 이벤트 버전 업데이트를 통한 스킬 강화도와 승화 초기화、소재 반납
				ELSEIF (CSTR:ARG:104 != "" && GETBIT(CFLAG:ARG:개별이벤트읽음,1)) || CSTR:ARG:105 != ""
					;昇華２達成、追想：魔王を継ぐ者クリア or 前衛クラスチェンジが解禁済みで解禁
					PRINTFORML [3] 클래스를 변경한다
				ENDIF
				DRAWLINE
				PRINTFORML [99] 소지품을 확인한다
				DRAWLINE
				PRINTFORML [100] 돌아간다
				CALL INPUTINT(0,1,2,3,99,100)
				SELECTCASE RESULT
					CASE 0
						CALL EVENT_PU_SKILL_CHECK_K812(ARG)
					CASE 1
						CALL PROMOTION_K812(ARG)
					CASE 2
						CALL PU_SKILL_POSITION_RESET_266,ARG
					CASE 3
						IF 현개인이벤트버전 > 아미야개인이벤트버전
							PRINTL
							PRINTL ※개인 이벤트 버전이 업데이트되어、스킬 강화 및 승화 진행도가 초기화됩니다
							PRINTW 　이에 따라、강화에 사용된 아이템이 반환됩니다
							PRINTL
							PRINTL
							PRINTL ※또한、아이템 반납 시、주회 보너스의
							PRINTL 『무구 아이템 인계』『방어구 아이템 인계』
							PRINTW 　등을 선택하지 않은 경우、해당 종류의 아이템이 반환되지 않는 점 유의하시기 바랍니다。
							PRINTL
							PRINTW 초기화를 실시합니까？
							CALL INPUT_YN
							SELECTCASE RESULT
								CASE 0
									CALL PU_SKILL_ENHANCE_MATERIAL_ROLLBACK_K812,ARG
									아미야개인이벤트버전 = 현개인이벤트버전
									GOTO INDIVIDUAL_EVENT_K812_GOTO
								CASE 1
									GOTO INDIVIDUAL_EVENT_K812_GOTO
							ENDSELECT
						ELSEIF (TOINT(CSTR:ARG:104) > 0 && GETBIT(CFLAG:ARG:개별이벤트읽음,1)) || CSTR:ARG:105 != ""
							CALL CLASS_ALTERNATE_K812,ARG
						ELSE
							GOTO INDIVIDUAL_EVENT_K812_GOTO
						ENDIF
					CASE 99
						CALL SHOP_COM_112
						GOTO INDIVIDUAL_EVENT_K812_GOTO
					CASE 100
						PRINTFORMW 볼일은 끝났다。세이프하우스로 돌아간다고 하자。
						PRINTL
						導入フラグ = 0
						RETURN 0
				ENDSELECT
			ENDIF
		ENDIF
	ENDIF
CASE 1
	;解放条件
	IF ARG:1 == 1
		;SIF CFLAG:ARG:전투참가불가능 > 0
		;	RETURN 0
		;アークナイツ版の条件はこっち
		IF CSTR:ARG:종족명 == "카우투스"
			IF CFLAG:ARG:이자리에없는플래그 > 0
				RETURN 0
			;アーミヤのレベルが70未満、昇華２を達成できていない場合は不可
			ELSEIF BASE:ARG:LV < 70 || CSTR:ARG:104 == ""
				RETURN 0
			;未陥落の場合は不可
			ELSEIF 함락(ARG) < 1
				RETURN 0
			ELSE
				RETURN 1
			ENDIF
		ENDIF
	ELSEIF ARG:1 == 2
	;타이틀
		IF CSTR:ARG:종족명 == "카우투스"
			IF GETBIT(CFLAG:ARG:개별이벤트개방, ARG:2)
				;타이틀
				;英語版はたぶん『Soul Surrender』とかになると思う（ヒカセン並感）
				RESULTS = 『마왕』을 계승하는 자
			ELSE
				;未開放時のタイトル（解放条件を入れておく）
				RESULTS = (%CALLNAME:ARG%의 레벨이 70이상、영격승화 ２달성、함락완료로 해방)
			ENDIF
		ENDIF
	;이벤트
	ELSEIF ARG:1 == 3
		IF CSTR:ARG:종족명 == "카우투스"
			SETCOLOR COLOR("RED")
			PRINTL ※주의！
			RESETCOLOR
			PRINTFORML 본 이벤트에서는 %조사처리(CALLNAME:MASTER,"가")% 부재중에 전투가 발생합니다
			PRINTW 계속 진행해도 괜찮겠습니까？
			CALL INPUT_YN
			IF RESULT == 0
				CALL INDIVIDUAL_EVENT_K812_AN_SOULSURRENDER,ARG
				RESULT = 1
				RETURN 1
			ELSE
				PRINTW 이벤트를 일시 중단합니다
				RETURN 0
			ENDIF
		ENDIF
	ENDIF
ENDSELECT

@EVENT_PU_SKILL_CHECK_K812,ARG
#LOCALSIZE 1
#DIM 計算用変数,5
#DIM 必要アイテム不足変数
#DIM 必要アイテム = -1
#DIMS 確認するスキル
#DIMS 必要条件 = ""

VARSET 必要アイテム不足変数,0
VARSET 必要アイテム,-1
$EVENT_PU_SKILL_CHECK_K812_GOTO
PRINTFORML 현재 %조사처리(CALLNAME:ARG,"가")% 사용하고 있는 전용기는 %CSTR:ARG:전용기1%이다。
PRINTL
PRINTFORML 어떻게 할까？
PRINTL
SELECTCASE CSTR:ARG:101
	CASE "아미야",""
		PRINTFORML [0] 전술영창γ을 확인한다
		IF CSTR:ARG:103 == ""
			SETCOLOR COLOR("GRAY")
			PRINTFORML [1] -
			RESETCOLOR
		ELSE
			PRINTFORML [1] 감정 흡수를 확인한다
		ENDIF
		IF CSTR:ARG:104 == ""
			SETCOLOR COLOR("GRAY")
			PRINTFORML [2] -
			RESETCOLOR
		ELSE
			PRINTFORML [2] 키메라를 확인한다
		ENDIF
	CASE "아미야（전위）"
		PRINTFORML [0] 영소ㆍ분야를 확인한다
		PRINTFORML [1] 영소ㆍ절영을 확인한다
ENDSELECT
PRINTFORML [99] 돌아간다
$EVENT_PU_SKILL_CHECK_K812_GOTO2
CALL INPUTINT(0,1,2,99)
SELECTCASE RESULT
	CASE 0
		IF CSTR:ARG:101 == "아미야" || CSTR:ARG:101 == ""
			確認するスキル = 전술영창γ
			計算用変数 = TOINT(CSTR:ARG:102)
		ELSEIF CSTR:ARG:101 == "아미야（전위）"
			確認するスキル = 영소ㆍ분야
			計算用変数 = TOINT(CSTR:ARG:105)
		ELSE
			GOTO EVENT_PU_SKILL_CHECK_K812_GOTO2
		ENDIF
	CASE 1
		IF CSTR:ARG:103 != "" && (CSTR:ARG:101 == "아미야" || CSTR:ARG:101 == "")
			確認するスキル = 감정 흡수
			計算用変数 = TOINT(CSTR:ARG:103)
		ELSEIF CSTR:ARG:101 == "아미야（전위）"
			確認するスキル = 영소ㆍ절영
			計算用変数 = TOINT(CSTR:ARG:106)
		ELSE
			GOTO EVENT_PU_SKILL_CHECK_K812_GOTO2
		ENDIF
	CASE 2
		IF CSTR:ARG:104 != "" && (CSTR:ARG:101 == "아미야" || CSTR:ARG:101 == "")
			確認するスキル = 키메라
			計算用変数 = TOINT(CSTR:ARG:104)
		ELSE
			GOTO EVENT_PU_SKILL_CHECK_K812_GOTO2
		ENDIF
	CASE 99
		JUMP INDIVIDUAL_EVENT_K812,ARG,3,0
ENDSELECT
$EVENT_PU_SKILL_CHECK_K812_GOTO3
;計算用変数:0 = スキルランク
;計算用変数:1 = 初期ＳＰ
;計算用変数:2 = 必要ＳＰ
;計算用変数:3 = ダメージ倍率
;計算用変数:4 = 戦術詠唱γは魔法命中ㆍ回避上昇の段階、ソウルブーストは攻撃回数、キメラは最大ＨＰ増加倍率
FOR COUNT,1,5
	SELECTCASE COUNT
		CASE 1
			SELECTCASE 確認するスキル
				CASE "감정 흡수","키메라","영소ㆍ절영"
					LOCAL = 0
				CASE "전술영창γ"
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 0
						CASE 2
							LOCAL = 5
						CASE 3
							LOCAL = 10
						CASE 4
							LOCAL = 15
					ENDSELECT
				CASE "영소ㆍ분야"
					LOCAL = 10
			ENDSELECT
		CASE 2
			SELECTCASE 確認するスキル
				CASE "전술영창γ"
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 40
						CASE 2
							LOCAL = 35
						CASE 3
							LOCAL = 32
						CASE 4
							LOCAL = 30
					ENDSELECT
				CASE "감정 흡수"
					LOCAL = 100
				CASE "키메라"
					LOCAL = 120
				CASE "영소ㆍ분야"
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 45
						CASE 2
							LOCAL = 42
						CASE 3
							LOCAL = 39
						CASE 4
							LOCAL = 35
					ENDSELECT
				CASE "영소ㆍ절영"
					LOCAL = 20
			ENDSELECT
		CASE 3
			SELECTCASE 確認するスキル
				CASE "전술영창γ"
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 10
						CASE IS > 1
							LOCAL = 20
					ENDSELECT
				CASE "감정 흡수"
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 33
						CASE 2
							LOCAL = 39
						CASE 3
							LOCAL = 45
						CASE 4
							LOCAL = 60
					ENDSELECT
				CASE "키메라"
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 50
						CASE 2
							LOCAL = 65
						CASE 3
							LOCAL = 80
						CASE 4
							LOCAL = 115
					ENDSELECT
				CASE "영소ㆍ분야"
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 10
						CASE 2
							LOCAL = 18
						CASE 3
							LOCAL = 25
						CASE 4
							LOCAL = 40
					ENDSELECT
				CASE "영소ㆍ절영"
					;絶影はスキル威力
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 120
						CASE 2
							LOCAL = 140
						CASE 3
							LOCAL = 160
						CASE 4
							LOCAL = 220
					ENDSELECT
			ENDSELECT
		CASE 4
			SELECTCASE 確認するスキル
				CASE "전술영창γ"
					SELECTCASE 計算用変数
						CASE 1,2
							LOCAL = 1
						CASE IS > 2
							LOCAL = 2
					ENDSELECT
				CASE "감정 흡수"
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 5
						CASE 2,3
							LOCAL = 6
						CASE 4
							LOCAL = 7
					ENDSELECT
				CASE "키메라"
					SELECTCASE 計算用変数
						CASE 1
							LOCAL = 25
						CASE 2
							LOCAL = 50
						CASE 3
							LOCAL = 75
						CASE 4
							LOCAL = 100
					ENDSELECT
				CASE "영소ㆍ절영"
					;ダメージ上昇
					SELECTCASE 計算用変数
						CASE IS < 3
							LOCAL = 10
						CASE 3
							LOCAL = 13
						CASE 4
							LOCAL = 20
					ENDSELECT
			ENDSELECT
	ENDSELECT
	計算用変数:(COUNT) = LOCAL
NEXT
DRAWLINE
PRINTL
PRINTFORML %確認するスキル%　초기ＳＰ:{計算用変数:1}　필요ＳＰ:{計算用変数:2}
PRINTL
SELECTCASE 確認するスキル
	CASE "전술영창γ"
		PRINTL 턴 경과에 따라 ＳＰ 5 상승。
		PRINTL 필요 ＳＰ를 충족했을 때、명령어를 선택하면 기동할 수 있다。
		PRINTFORML 스킬 사용중、공격의 피해가 {計算用変数:3}％ 증가하여、
		PRINTFORML 마법 공격의 명중ㆍ회피가 {計算用変数:4}단계 상승、물리 공격 회피가 1단계 상승한다。
		SIF 計算用変数 > 3
			PRINTL 또한 스킬 사용중인 동안、임의의 마법 공격을 추가로 발동하는『ＥＸ－ＣＡＳＴ』명령어가 선택 가능해진다。
	CASE "감정 흡수"
		PRINTL 턴 경과에 따라 ＳＰ 5 상승。
		PRINTL 필요 ＳＰ를 충족한 시점에서 자동으로 발동한다。
		PRINTFORML 스킬 사용중、자신의 카운터、및 추격계 공격의 피해가 {計算用変数:3}％ 까지 저하。
		PRINTFORML 그 대신、자신의 마법 공격 후 적 전체를 랜덤으로 대상으로 한 추격을 {計算用変数:4}회 실시한다。
		PRINTL 추격의 위력과 상성은 직전에 사용했던 마법 공격의 것을 이어받는다。
		PRINTL 효과 종료 시 자신에게 자연 회복까지 2턴 걸리는 SLIP을 부여。
	CASE "키메라"
		PRINTL 턴 경과에 따라 ＳＰ 5 상승。
		PRINTL 필요 ＳＰ를 충족했을 때、명령어를 선택하면 기동할 수 있다。
		PRINTFORML 스킬 사용중、마법공격의 피해가 {計算用変数:3}％ 증가하고、최대 ＨＰ가 {計算用変数:4}％ 증가하며、ＨＰ도 증가분 회복。
		PRINTL 효과가 지속되는 동안、마법 공격 스킬을 사용했을 때에 한하여、대상의 반사 or 흡수 이외의 내성과 비활성화계 스킬을 관통하여、
		PRINTL 공격 대상의 피데미지 보정의 영향을 받지 않게 된다。
		PRINTL 스킬 사용중 공격마법을 사용했을 때、「공격 대상을 적 전체중 랜덤 일체」、「데미지 타입 없음」으로 변경하고、행동을「키메라」로 덮어쓴다。
		PRINTL 「키메라」는 입력한 마법 공격의 성능을 이어받지만、공격 횟수는 1회로 고정된다。
		PRINTL 사용 중 전투 이탈、혹은 전투 불능이 되었을 때 게이지 리셋、쿨 타임 게이지 추가。
		PRINTL 쿨타임 게이지가 소멸될 때까지、스킬 발동에 필요한 ＳＰ는 증가하지 않는다。
		SETCOLOR COLOR("RED")
		PRINTL 효과 종료、혹은 게이지 리셋이 발생할 경우、사용자는 강제로 DYING이 된다。
		RESETCOLOR
	CASE "영소ㆍ분야"
		PRINTL 턴 경과에 따라 ＳＰ 5 상승。
		PRINTL 필요 ＳＰ를 충족했을 때、명령어를 선택하면 기동할 수 있다。
		PRINTFORML 스킬 사용중、자신의 여대미지가 {計算用変数:3}％ 증가하여、마법 공격에 대한 회피율이 ２단계 상승한다。
		PRINTL 또한 스킬 사용중、임의의 물리공격을 추가로 발동하는『ＥＸ－ＭＯＶＥ』명령어가 선택 가능해진다。
	CASE "영소ㆍ절영"
		PRINTL 턴 경과에 따라 ＳＰ 5 상승。
		PRINTL 필요 ＳＰ를 충족했을 때、명령어를 선택함으로써 통상 행동 대신 발동할 수 있다。
		PRINTFORML 적 전체 중 가장 ＨＰ가 낮은 적에게 {計算用変数:3}정도 위력의 물리 검격 상성의 공격을 10회 실시한다。
		PRINTL 이 공격은 마법위력 강화의 영향을 받으며、더욱이 마지막 일격은 위력이 배가되어、「데미지 타입 없음」으로 취급되는 대신에
		PRINTL 상대의 무효 이하의 상성과 스킬에 의한 무효화를 관통한다。
		PRINTFORML 이 공격으로 적을 쓰러뜨릴 때마다、자신의「여데미지 {計算用変数:4}％증가、마법피 데미지 15％ 경감」의 버프를 ３회까지 부여한다。
		PRINTL
		PRINTL 이 공격을 마친 후、스킬 게이지가 비워질 때까지 자신의 물리적 피해를 입히는 공격이「데미지 타입 없음」으로 취급되며、
		PRINTL 상대의 무효 이하의 상성과 스킬에 의한 무효화를 관통하는 상태가 된다。
		PRINTL
		SETCOLOR COLOR("RED")
		PRINTL 이 스킬은 던전 탐색 중에 한 번 밖에 발동할 수 없다。
		RESETCOLOR
ENDSELECT
PRINTL
DRAWLINE
CALL PU_SKILL_ENHANCE_K812,ARG,確認するスキル,計算用変数:0
IF RESULT != -1
	必要アイテム = RESULT
	必要条件 = %PU_SKILL_ENHANCE_REQUIREMENTS_CHECK_K812(ARG,確認するスキル,計算用変数:0)%
ENDIF
;IF ITEM:必要アイテム > 0
;	PRINTL 足りてる
;ELSE
;	PRINTL 足りぬ
;ENDIF
SIF CSTR:ARG:전용기1 == 確認するスキル
	SETCOLOR COLOR("GRAY")
PRINTFORML [0] 이 스킬로 변경한다
RESETCOLOR
IF 計算用変数 >= 4
	SETCOLOR COLOR("GRAY")
	PRINTFORML [1] 이 기술은 이미 최대까지 강화되었다
ELSE
	SIF ITEM:必要アイテム <= 0 || (計算用変数 == 2 && CSTR:ARG:103 == "") || (計算用変数 == 3 && CSTR:ARG:104 == "")
		SETCOLOR COLOR("GRAY")
	PRINTFORML [1] 이 스킬을 강화하는데　필요한 아이템：%ITEMNAME:必要アイテム%　%必要条件%
ENDIF
RESETCOLOR
DRAWLINE
PRINTFORML [99] 돌아간다
;PRINTW でばっぐすとっぷ
$EVENT_PU_SKILL_CHECK_K812_GOTO4
CALL INPUTINT(0,1,99)
SELECTCASE RESULT
	CASE 0
		SIF CSTR:ARG:전용기1 == 確認するスキル
			GOTO EVENT_PU_SKILL_CHECK_K812_GOTO4
		PRINTL 
		PRINTFORMW %CALLNAME:ARG%의 스킬을 %確認するスキル%로 변경했다。
		CSTR:ARG:전용기1 = %確認するスキル%
		GOTO EVENT_PU_SKILL_CHECK_K812_GOTO
	CASE 1
		SIF 計算用変数 >= 4 || ITEM:必要アイテム < 1 || (計算用変数 == 2 && CSTR:ARG:103 == "") || (計算用変数 == 3 && CSTR:ARG:104 == "")
			GOTO EVENT_PU_SKILL_CHECK_K812_GOTO4
		PRINTFORML %ITEMNAME:必要アイテム%을 소비하여 %CALLNAME:ARG%의 %確認するスキル%를 강화하겠습니까？
		CALL INPUT_YN
		SIF RESULT == 1
			GOTO EVENT_PU_SKILL_CHECK_K812_GOTO3
		PRINTL 
		計算用変数 += 1
		PRINTFORMW %CALLNAME:ARG%의 %確認するスキル%가 강화되어、스킬 등급이 {計算用変数}가 되었다。
		ITEM:必要アイテム -= 1
		SELECTCASE 確認するスキル
			CASE "전술영창γ"
				CSTR:ARG:102 = %TOSTR(計算用変数)%
			CASE "감정 흡수"
				CSTR:ARG:103 = %TOSTR(計算用変数)%
			CASE "키메라"
				CSTR:ARG:104 = %TOSTR(計算用変数)%
			CASE "영소ㆍ분야"
				CSTR:ARG:105 = %TOSTR(計算用変数)%
			CASE "영소ㆍ절영"
				CSTR:ARG:106 = %TOSTR(計算用変数)%
		ENDSELECT
		GOTO EVENT_PU_SKILL_CHECK_K812_GOTO
	CASE 99
		GOTO EVENT_PU_SKILL_CHECK_K812_GOTO
ENDSELECT

@PU_SKILL_ENHANCE_REQUIREMENTS_CHECK_K812,ARG,ARGS,ARG:1
#FUNCTIONS
; ARG   = 対象キャラ
; ARGS  = 対象スキル
; ARG:1 = スキルランク
SELECTCASE ARGS
	CASE "전술영창γ"
		SELECTCASE ARG:1
			CASE 2
				RETURNF "필요조건：" + CALLNAME:ARG + "의 승화 １도달"
			CASE 3
				RETURNF "필요조건：" + CALLNAME:ARG + "의 승화 ２도달"
		ENDSELECT
	CASE "감정 흡수"
		SELECTCASE ARG:1
			CASE 3
				RETURNF "필요조건：" + CALLNAME:ARG + "의 승화 ２도달"
		ENDSELECT
ENDSELECT

@PU_SKILL_ENHANCE_K812,ARG,ARGS = "",ARG:1
#DIM 必要アイテム

必要アイテム = -1
SELECTCASE ARGS
	CASE "전술영창γ"
		SELECTCASE ARG:1
			CASE 1
				必要アイテム = [[아이템:파이어라빈트-]]
			CASE 2
				必要アイテム = [[아이템:잊혀진연금매체]]
			CASE 3
				必要アイテム = [[아이템:블랙배럴ㆍ레플리카]]
		ENDSELECT
	CASE "감정 흡수"
		SELECTCASE ARG:1
			CASE 1
				必要アイテム = [[아이템:검은암륜]]
			CASE 2
				必要アイテム = [[아이템:정적의반지]]
			CASE 3
				必要アイテム = [[아이템:흑신의돌]]
		ENDSELECT
	CASE "키메라"
		SELECTCASE ARG:1
			CASE 1
				必要アイテム = [[아이템:스킬카드【포미러버】]]
			CASE 2
				必要アイテム = [[아이템:스킬카드【암흑마하ㆍ아쿠에스】]]
			CASE 3
				必要アイテム = [[아이템:스킬카드【브류나크】]]
		ENDSELECT
	CASE "영소ㆍ분야"
		SELECTCASE ARG:1
			CASE 1
				必要アイテム = [[아이템:히트나이프]]
			CASE 2
				必要アイテム = [[아이템:정령대장장이의검]]
			CASE 3
				必要アイテム = [[아이템:화룡검]]
		ENDSELECT
	CASE "영소ㆍ절영"
		SELECTCASE ARG:1
			CASE 1
				必要アイテム = [[아이템:극화괴]]
			CASE 2
				必要アイテム = [[아이템:완전신주]]
			CASE 3
				必要アイテム = [[아이템:구철검]]
		ENDSELECT
ENDSELECT
SIF 必要アイテム == -1
	RETURN -1
RETURN 必要アイテム


@PROMOTION_K812,ARG
#DIM LCOUNT
$PROMOTION_K812_GOTO
PRINTFORML 아무래도 %CALLNAME:ARG%의 영격을 승화시킬 수 있을 것 같다。
PRINTL 
PRINTL 어떻게 할까？
PRINTL
IF CSTR:ARG:103 == ""
	CUSTOMDRAWLINE =
	PRINTFORML 승화 시 다음과 같은 혜택을 얻는다。
	PRINTL
	PRINTL 스킬 해금：감정 흡수
	PRINTL
	PRINTL 효과 발동중、카운터 및 추격으로 주는 데미지가 60％ 까지 저하。마법 공격 후、적 전체에게 랜덤으로 마법 데미지를 주는 추격을 한다。
	PRINTL 추격은 직전 사용한 마법 공격의 위력과 상성을 참조한다。
	PRINTL
	PRINTL
	PRINTL 습득 스킬 업데이트
	PRINTL 
	PRINTL 영격승화시、습득 스킬이 갱신된다。
	PRINTL 영격승화 후 시점에서 이미 습득에 필요한 레벨을 충족한 경우、그 자리에서 스킬을 습득한다
	CUSTOMDRAWLINE =
ELSEIF CSTR:ARG:104 == ""
	CUSTOMDRAWLINE =
	PRINTFORML 승화 시 다음과 같은 혜택을 얻는다。
	PRINTL
	PRINTL 스킬 해금：키메라
	PRINTL
	PRINTL 스킬 사용중、마법 공격 데미지가 50％ 업、최대 ＨＰ가 25％ 증가、ＨＰ 증가분 회복。
	PRINTL 효과 지속 중、마법 공격 스킬을 사용했을 때에 한하여、대상의 반사 or 흡수 이외의 내성과 비활성화계 스킬을 관통하여、
	PRINTL 공격 대상의 피데미지 보정의 영향을 받지 않게 된다。
	PRINTL 스킬 사용중에 공격마법을 사용했을 때、공격 대상을「적 전체에서 랜덤 일체」로 변경하고、행동을「키메라」로 덮어쓴다。
	PRINTL 「키메라는」입력한 마법 공격의 성능을 이어받지만、공격 횟수는 1회로 고정된다。
	PRINTL 기동 중 전투 이탈、혹은 전투 불능이 되었을 때 게이지 리셋、쿨 타임 게이지 추가。
	PRINTL 쿨타임 게이지가 소멸될 때까지、스킬 발동에 필요한 ＳＰ는 증가하지 않는다。
	SETCOLOR COLOR("RED")
	PRINTL 효과 종료、혹은 게이지 리셋이 발생할 경우、사용자는 강제로 DYING이 된다。
	RESETCOLOR
	PRINTL
	PRINTL
	PRINTL 스킬 해금：？？？　→　감정 흡수
	PRINTL
	PRINTL 자동효과。공격 행동을 할 때마다 ＳＰ를＋3 가산한다。게다가 그 공격으로 적을 쓰러뜨리면 ＳＰ＋10 가산한다。
	PRINTFORML 이 스킬을 소지하지 않은 경우、%조사처리(CALLNAME:ARG,"는")% 키메라를 사용할 수 없다。
	PRINTL
	PRINTL
	PRINTL 습득 스킬 업데이트
	PRINTL 
	PRINTL 영격승화시、습득 스킬이 갱신된다。
	PRINTL 영격승화 후 시점에서 이미 습득에 필요한 레벨을 충족한 경우、그 자리에서 스킬을 습득한다
	CUSTOMDRAWLINE =
ENDIF
PRINTL
PRINTL
IF CSTR:ARG:104 != ""
	SETCOLOR COLOR("GRAY")
	PRINTFORML [-] %CALLNAME:ARG%의 영격은 더 이상 승화할 수 없는 것 같다
ELSE
	SIF (CSTR:ARG:103 == "" && (ITEM:[[아이템:반혼의반지]] < 1 || BASE:ARG:LV < 50 || MONEY:1 < 2000)) || (CSTR:ARG:103 != "" && CSTR:ARG:104 == "" && (ITEM:[[아이템:고고함의반지]] < 1 || BASE:ARG:LV < 70 || MONEY:1 < 12000))
		SETCOLOR COLOR("GRAY")
	PRINTFORML [0] %CALLNAME:ARG%의 영격 승화에　필요한 아이템：\@ CSTR:ARG:103 == "" ? 반혼의반지 # 고고함의반지 \@　필요 레벨：\@ CSTR:ARG:103 == "" ? 50 # 70 \@　필요 마카：\@ CSTR:ARG:103 == "" ? 2000 # 12000 \@
ENDIF
RESETCOLOR
PRINTFORML [99] 돌아간다
$PROMOTION_K812_GOTO2
CALL INPUTINT (0,99)
SELECTCASE RESULT
	CASE 0
		IF CSTR:ARG:103 == ""
			SIF ITEM:[[아이템:반혼의반지]] < 1 || BASE:ARG:LV < 50 || MONEY:1 < 2000
				GOTO PROMOTION_K812_GOTO2
			PRINTFORML 반혼의반지와 마카를 소비하여 %CALLNAME:ARG%의 영격을 승화합니까？
			CALL INPUT_YN
			SIF RESULT == 1
				GOTO PROMOTION_K812_GOTO
			PRINTL
			PRINTFORMW %CALLNAME:ARG%의 영격을 승화했다！
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 감정 흡수를 사용할 수 있게 되었다！
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 새로운 기술을 습득할 수 있게 되었다！
			PRINTW 감정 흡수사용하려면 한번 스킬을 변경해야 한다。잊지 말자。
			CSTR:ARG:103 = 1
			ITEM:[[아이템:반혼의반지]] -= 1
			MONEY:1 -= 2000
			LCOUNT = TOINT(CSTR:ARG:152)
			CLEARBIT LCOUNT,0
			CSTR:ARG:152 = %TOSTR(LCOUNT)%
			;CLEARBIT アーミヤ習得スキルテーブル適用フラグ,1
			CALL SKILL_LEARNSET_UPDATE_K812,ARG,0,"昇華１"
			CALL EVENT_LEVELUP,ARG
			GOTO PROMOTION_K812_GOTO
		ELSEIF CSTR:ARG:104 == ""
			SIF ITEM:[[아이템:고고함의반지]] < 1 || BASE:ARG:LV < 80 || MONEY:1 < 12000
				GOTO PROMOTION_K812_GOTO2
			PRINTFORML 고고함의반지와 마카를 소비하여 %CALLNAME:ARG%의 영격을 승화합니까？
			CALL INPUT_YN
			SIF RESULT == 1
				GOTO PROMOTION_K812_GOTO
			PRINTL
			PRINTFORMW %CALLNAME:ARG%의 영격을 한층 더 승화했다！
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 키메라를 사용할 수 있게 되었다！
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 감정 흡수를 습득했다！
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 새로운 기술을 습득할 수 있게 되었다！
			PRINTW 키메라를 사용하기 위해서는 한 번 스킬을 변경하고、다시 감정 흡수를 습득하고 있을 필요가 있다。잊지 말자。
			CSTR:ARG:104 = 1
			ITEM:[[아이템:고고함의반지]] -= 1
			MONEY:1 -= 12000
			LCOUNT = TOINT(CSTR:ARG:152)
			CLEARBIT LCOUNT,0
			CSTR:ARG:152 = %TOSTR(LCOUNT)%
			;CLEARBIT アーミヤ習得スキルテーブル適用フラグ,1
			CALL SKILL_LEARNSET_UPDATE_K812,ARG,0,"昇華２"
			CALL EVENT_LEVELUP,ARG
			GOTO PROMOTION_K812_GOTO
		ENDIF
	CASE 99
		JUMP INDIVIDUAL_EVENT_K812,ARG,3,0
ENDSELECT

@PU_SKILL_POSITION_RESET_812,ARG
#LOCALSSIZE 13
#DIMS 一時確保スキル名,13
;専用技が1以外に登録されるバグを直すために専用技を一旦初期化して改めて1から順に記入する処理
;LOCAL:0 = 第一ループ
;LOCAL:1 = 第二ループ
;LOCAL:2 = 一時確保スキル名の配列数
PRINTL
PRINTL 전용기를 처음부터 순서대로 다시 쓰도록、리셋을 합니다
PRINTL 리셋을 진행하겠습니까？
CALL INPUT_YN
IF RESULT == 0
	FOR LOCAL:0,0,3
		FOR LOCAL:1,1,13
			;最初は専用技のスキル名確保、及び専用技欄のリセット
			IF LOCAL:0 == 0
				;専用技欄が空白だった場合は飛ばす
				IF CSTR:ARG:("전용기"+TOSTR(LOCAL:1)) == ""
					CONTINUE
				;専用技欄が記載されていた場合、一旦DIMで確保した上で専用技欄を空欄にする
				ELSEIF CSTR:ARG:("전용기"+TOSTR(LOCAL:1)) != ""
					一時確保スキル名:(LOCAL:2) = %CSTR:ARG:("전용기"+TOSTR(LOCAL:1))%
					CSTR:ARG:("전용기"+TOSTR(LOCAL:1)) = ""
					LOCAL:2 += 1
				ENDIF
			;こちらは専用技を1から埋めなおす処理
			ELSEIF LOCAL:0 == 1
				;スキル名確保変数が空白だった場合、その時点で処理を終える
				IF 一時確保スキル名:(LOCAL:2) == ""
					BREAK
				;一旦DIMで確保したスキル名を専用技欄に書き直す
				ELSE
					CSTR:ARG:("전용기"+TOSTR(LOCAL:1)) = %一時確保スキル名:(LOCAL:2)%
					LOCAL:2 += 1
				ENDIF
			ENDIF
		NEXT
		;第二ループ終了後に一時確保スキル名の配列数をリセット
		SIF LOCAL:2 != 0
			LOCAL:2 = 0
	NEXT
	;最後に一時確保スキル名をリセットする
	VARSET 一時確保スキル名,""
	PRINTL
	PRINTL 리셋이 완료되었습니다
	PRINTW 미설정 전용 기술이 스킬란에 남아있을 경우、번거로우시겠지만 삭제 부탁드립니다
	JUMP INDIVIDUAL_EVENT_K812,ARG,3,0
ELSEIF RESULT == 1
	JUMP INDIVIDUAL_EVENT_K812,ARG,3,0
ENDIF

@PU_SKILL_ENHANCE_MATERIAL_ROLLBACK_K812,ARG
#DIM LOOP_C
#DIM L_COUNT,3
#DIM 昇華返却フラグ,2

;強化と昇華に使った素材の返却
;103と104,105,106は0ではなく""にする
;スキルレベルの初期化

FOR L_COUNT,102,107
	L_COUNT:1 = TOINT(CSTR:ARG:L_COUNT)
	IF (아미야개인이벤트버전 < 101 && L_COUNT:1 > 1 && 昇華返却フラグ < 2) || (L_COUNT:1 > 2 && 昇華返却フラグ < 2)
		IF 아미야개인이벤트버전 < 101
			SELECTCASE LOCAL:1
				CASE 3
					昇華返却フラグ:0 = 1
					昇華返却フラグ:1 = 1
				CASE 2
					昇華返却フラグ:0 = 1
			ENDSELECT
		ELSE
			SELECTCASE LOCAL:1
				CASE 4
					昇華返却フラグ:0 = 1
					昇華返却フラグ:1 = 1
				CASE 3
					昇華返却フラグ:0 = 1
			ENDSELECT
		ENDIF
	ENDIF
	FOR L_COUNT:2,L_COUNT:1,-1,-1
		;LOOP_C += 1
		CALL MATERIAL_ROLLBACK_LIST_K812,L_COUNT:0,L_COUNT:2
		;PRINTFORMW Bループ{LOOP_C}回目
	NEXT
	;LOOP_C = 0
	SIF L_COUNT == 102
		CSTR:ARG:L_COUNT = 1
	SIF L_COUNT != 102
		CSTR:ARG:L_COUNT = 
NEXT
;IF HAVE_PU_SKILL(ARG,"アブソープション",1)
;	RESULT = HAVE_PU_SKILL(ARG,"アブソープション",1)
;	ABL:ARG:("스킬" + TOSTR(RESULT)) = 0
;	CSTR:ARG:전용기2 =
;ENDIF
IF 昇華返却フラグ:0 == 1
	ITEM:[[아이템:반혼의반지]] += 1
ENDIF
IF 昇華返却フラグ:1 == 1
	ITEM:[[아이템:고고함의반지]] += 1
ENDIF
PRINTW 초기화가 완료되었습니다

@MATERIAL_ROLLBACK_LIST_K812,ARG,ARG:1
;ARG:0 = 該当スキル
;ARG:1 = スキルランク

SELECTCASE 아미야개인이벤트버전
	CASE IS < 101
		SELECTCASE ARG:1
			CASE 3
				SIF ARG == 102
					ITEM:[[아이템:블랙배럴ㆍ레플리카]] += 1
				SIF ARG == 103
					;よくよく考えれば合成武器は常に引き継がれる代物だった
					ITEM:[[아이템:흑신의돌]] += 1
				SIF ARG == 104
					ITEM:[[아이템:스킬카드【브류나크】]] += 1
				SIF ARG == 105
					ITEM:[[아이템:화룡검]] += 1
				SIF ARG == 106
					ITEM:[[아이템:구철검]] += 1
			CASE 2
				SIF ARG == 102
					ITEM:[[아이템:잊혀진연금매체]] += 1
				SIF ARG == 103
					ITEM:[[아이템:정적의반지]] += 1
				SIF ARG == 104
					ITEM:[[아이템:스킬카드【암흑마하ㆍ아쿠에스】]] += 1
				SIF ARG == 105
					ITEM:[[아이템:정령대장장이의검]] += 1
				SIF ARG == 106
					ITEM:[[아이템:완전신주]] += 1
			CASE 1
				SIF ARG == 102
					ITEM:[[아이템:파이어라빈트-]] += 1
				SIF ARG == 103
					ITEM:[[아이템:검은암륜]] += 1
				SIF ARG == 104
					ITEM:[[아이템:스킬카드【포미러버】]] += 1
				SIF ARG == 105
					ITEM:[[아이템:히트나이프]] += 1
				SIF ARG == 106
					ITEM:[[아이템:극화괴]] += 1
		ENDSELECT
	CASEELSE
		SELECTCASE ARG:1
			CASE 4
				SIF ARG == 102
					ITEM:[[아이템:블랙배럴ㆍ레플리카]] += 1
				SIF ARG == 103
					ITEM:[[아이템:흑신의돌]] += 1
				SIF ARG == 104
					ITEM:[[아이템:스킬카드【브류나크】]] += 1
				SIF ARG == 105
					ITEM:[[아이템:화룡검]] += 1
				SIF ARG == 106
					ITEM:[[아이템:구철검]] += 1
			CASE 3
				SIF ARG == 102
					ITEM:[[아이템:잊혀진연금매체]] += 1
				SIF ARG == 103
					ITEM:[[아이템:정적의반지]] += 1
				SIF ARG == 104
					ITEM:[[아이템:스킬카드【암흑마하ㆍ아쿠에스】]] += 1
				SIF ARG == 105
					ITEM:[[아이템:정령대장장이의검]] += 1
				SIF ARG == 106
					ITEM:[[아이템:완전신주]] += 1
			CASE 2
				SIF ARG == 102
					ITEM:[[아이템:파이어라빈트-]] += 1
				SIF ARG == 103
					ITEM:[[아이템:검은암륜]] += 1
				SIF ARG == 104
					ITEM:[[아이템:스킬카드【포미러버】]] += 1
				SIF ARG == 105
					ITEM:[[아이템:히트나이프]] += 1
				SIF ARG == 106
					ITEM:[[아이템:극화괴]] += 1
		ENDSELECT
ENDSELECT

@CLASS_ALTERNATE_K812,ARG
#DIMS クラスチェンジ先
#DIM LCOUNT
;面倒なのでCSTR:ARG:150で各クラスのステータスを管理
;空白ならセットしなおす
SIF CSTR:ARG:150 == ""
	CSTR:ARG:150 = _『CASTER』_LV_0001_힘_0001_지혜_0005_마력_0005_인내력_0002_속도_0002_운_0002_：_『GUARD』_LV_0001_힘_0004_지혜_0002_마력_0003_인내력_0004_속도_0004_운_0003
;CSTR:151は各クラスに所有していたスキルを保存するのに使う
SIF CSTR:ARG:151 == ""
	CSTR:ARG:151 = 『CASTER』_스킬1_0_스킬2_0_스킬3_0_스킬4_0_스킬5_0_스킬6_0_스킬7_0_스킬8_0_스킬9_0_스킬10_0_스킬11_0_스킬12_0_：_『GUARD』_스킬1_0_스킬2_0_스킬3_0_스킬4_0_스킬5_0_스킬6_0_스킬7_0_스킬8_0_스킬9_0_스킬10_0_스킬11_0_스킬12_0
	;CSTR:ARG:151 = 『CASTER』_스킬1_2403_8_스킬2_2011_14_스킬3_1237_18_스킬4_1424_24_스킬5_1502_28_스킬6_2404_34_스킬7_2001_38_스킬8_2411_45_스킬9_2012_50_스킬10_1207_58_스킬11_1420_60_스킬12_1503_62_스킬13_2405_64_스킬14_2002_66_스킬15_2412_68_스킬16_2013_70_스킬17_2008_74_스킬18_2413_77_스킬19_2437_80_：_『GUARD』_스킬1_14_8_스킬2_763_14_스킬3_1438_18_스킬4_511_24_스킬5_13_28_스킬6_719_34_스킬7_534_38_스킬8_5_45_스킬9_2449_50_스킬10_729_58_스킬11_38_60_스킬12_2407_62_스킬13_29_64_스킬14_2012_66_스킬15_6_68_스킬16_2067_70_스킬17_2484_74_스킬18_525_77_스킬19_2097_80_
;CSTR:ARG:153は各クラス時に持っていた耐性を保存、装備やプラグイン等で付与された耐性は保存しないものとする
SIF CSTR:ARG:153 == ""
	CSTR:ARG:153 = 『CASTER』_검격_125_비구_125_타격_125_전술_125_화염_75_빙결_75_전격_75_충격_75_신경_100_정신_999_파마_100_주살_0_지변_75_수격_75_질풍_75_중력_100_핵열_100_만능_100_：_『GUARD』_검격_50_비구_75_타격_75_전술_75_화염_50_빙결_125_전격_75_충격_75_신경_100_정신_999_하마_100_주살_0_지변_75_수격_125_질풍_75_중력_100_핵열_50_만능_100_
$CLASS_ALTERNATE_K812_GOTO
PRINTFORML 여기서는 %CALLNAME:ARG%의 클래스를 변경할 수 있을 것 같다。
PRINTL ……보아하니 각 클래스마다 능력치나 소지 스킬、습득 스킬 등이 보존되어 있다。
PRINTL
PRINTFORML 클래스를 변경하면 현재 클래스에 현재 %CALLNAME:ARG%의 정보가 저장되며、
PRINTFORML 그 후 지금의 %CALLNAME:ARG%의 정보가 변경처 클래스의 것으로 대체되는 구조인 것 같다。
PRINTL
PRINTFORML 어떻게 할까？
PRINTL
IF CSTR:ARG:101 == "아미야" || CSTR:ARG:101 == ""
	SETCOLOR COLOR("GRAY")
	PRINTFORML [0] -
	RESETCOLOR
ELSE
	PRINTFORML [0] 『캐스터』로 변경한다
ENDIF
IF CSTR:ARG:101 == "아미야（전위）"
	SETCOLOR COLOR("GRAY")
	PRINTFORML [1] -
	RESETCOLOR
ELSE
	PRINTFORML [1] 『전위』로 변경한다
ENDIF
PRINTFORML [99] 돌아간다
$CLASS_ALTERNATE_K812_GOTO2
CALL INPUTINT(0,1,99)
SELECTCASE RESULT
	CASE 0
		IF CSTR:ARG:101 == "아미야" || CSTR:ARG:101 == ""
			GOTO CLASS_ALTERNATE_K812_GOTO2
		ELSE
			クラスチェンジ先 = 캐스터
			CALL CLASS_ALTERNATE_PROCESS_K812,ARG,0
		ENDIF
	CASE 1
		IF CSTR:ARG:101 == "아미야（전위）"
			GOTO CLASS_ALTERNATE_K812_GOTO2
		ELSE
			クラスチェンジ先 = 전위
			CALL CLASS_ALTERNATE_PROCESS_K812,ARG,1
		ENDIF
	CASE 99
		JUMP INDIVIDUAL_EVENT_K812,ARG,3,0
ENDSELECT
PRINTFORML %CALLNAME:ARG%의 클래스가『%クラスチェンジ先%』로 변경되었다
PRINTL
PRINTFORML 아무래도 변경에 따라、%CALLNAME:ARG%의 성능이 변화한 것 같다
PRINTFORML ……클래스 변경의 폐해인지、전용 기술이 초기 습득물로 변경되고 있다
PRINTFORMW 잊지말고 확인해두자
JUMP INDIVIDUAL_EVENT_K812,ARG,3,0

@CLASS_ALTERNATE_PROCESS_K812,ARG,ARG:1
#DIM LCOUNT,4
;#DIM 汎用
#DIMS 汎用字,10
#DIMS LCLASS,2
;アーミヤに限り、所謂クラスチェンジの処理を行える
;この場合、102 ~ 104のCSTRはそのまま、105 ~ 106のCSTRを別クラスのスキルランクとして扱う
;原作だと今後の展開次第では前衛以外のクラスチェンジ先も増える可能性があるので
;いっそCSTRではなく、ERHで保存できる専用イベント用の変数でも用意して、そこにクラス毎のスキル欄を保存する事にした方が良さそう
;問題はクラス毎に適したステータス振り分けを行うか否かなんだけどぉ……
;もう面倒くさいし、シフターのステ振り分けの要領で振り分け値を設定して、SYNC_STATUSで呼び出せるように設定すればいいや……（
;と思ったけど。クラス毎に専用のステータス値を設けるのがいい気がしてきた、もちろんレベル連動で。
;クラスチェンジ時にキャラレベルを参照して、イベント側で確保しているレベルより上だったらＥＸＰ以外イベント側で確保したステータス値と交換した上でレベルアップ処理をして
;キャラレベルがイベント側で確保してるレベルより下だった場合はレベル1からスタートしたステータス値に交換してレベルアップ処理を呼び出すことにする
;メモ：SPLIT機能で疑似的にリストを作れるのを最近知ったので、CSTRで管理する方法を試みる
VARSET LCOUNT,0
VARSET LCLASS
;VARSET 汎用,-1
;LCOUNT:0 = 現クラス
;LCOUNT:1 = クラスチェンジ先
;LCOUNT:2 = BASE能力値。 0 = LV,以降は基本能力値
;LCOUNT:3 = 初期値代入用変数、etc
SELECTCASE ARG:1
	CASE 0
	;術師
		SIF CSTR:ARG:101 == "아미야" || CSTR:ARG:101 == ""
			RETURN -1
		LCOUNT:1 = 0
		LCLASS:1 += "CASTER"
		;LCLASS:1 += "『術師』"
	CASE 1
	;前衛
		SIF CSTR:ARG:101 == "아미야（전위）"
			RETURN -1
		LCOUNT:1 = 1
		LCLASS:1 += "GUARD"
		;LCLASS:1 += "『前衛』"
ENDSELECT
SELECTCASE CSTR:ARG:101
	CASE "아미야",""
	;術師（仮に空白だった場合は術師を初期クラスとして扱う）
		LCOUNT:0 = 0
		LCLASS:0 += "CASTER"
		;LCLASS:0 += "『術師』"
	CASE "아미야（전위）"
	;前衛
		LCOUNT:0 = 1
		LCLASS:0 += "GUARD"
		;LCLASS:0 += "『前衛』"
ENDSELECT
;IF BASE:ARG:LV > アーミヤクラスステータス:(LCOUNT:1):0
;PRINTW 상태 업데이트 루프에 들어갑니다
;汎用字 = AUTO_SPLIT(CSTR:ARG:150,"：",LCOUNT:0)
;;『（クラス名）』の文字数 + 『術師』『前衛』等を検索した位置の分だけ小さい添え字の方へとずらす
;;ずらさないと選択クラスが前衛の時に、先にある術師のステータス値を参照してしまう事故が起こる
;汎用字 = %SHIFT_SPLIT(汎用字,"_",-(STRLENS(LCLASS:0) + FINDELEMENT(汎用字,LCLASS:0)))%
;汎用字 = %CSTR:ARG:150%
SPLIT CSTR:ARG:150,"：",汎用字
FOR LCOUNT:2,0,FLAG:기본능력수
	; "_"で区切った汎用字の内、『（クラス名）』+ 1の位置 + 該当する基本ステータスの配列に現在のステータス値を保存
	;例：現クラス（術師）、該当ステータス（魔力5 → 魔力15）の場合は下のように変更する
	;『術師』_LV_0001_力_0001_知恵_0005_魔力_0005_耐力_0002_速さ_0002_運_0002　→　『術師』_LV_0001_力_0001_知恵_0005_魔力_0015_耐力_0002_速さ_0002_運_0002
	; CHANGE_SPLIT(CSTR:ARG:150,"_",1,"魔力",BASE:ARG:마력)		わかりやすくしたらたぶんこんな感じになると思う
	汎用字:(LCOUNT:0) = %CHANGE_SPLIT(汎用字:(LCOUNT:0),"_",1,GET_BASESTATUS(LCOUNT:2),"0" *(4 - STRLENS(TOSTR(BASE:ARG:GET_BASESTATUS(LCOUNT:2)))) + TOSTR(BASE:ARG:GET_BASESTATUS(LCOUNT:2)))%
	;PRINTFORMW %LCLASS:0% %GET_BASESTATUS(LCOUNT:2)% = {AUTO_SPLIT_INT(汎用字:(LCOUNT:0),"_",1,GET_BASESTATUS(LCOUNT:2))}
	;現ステータス値に保存されている変更先のクラスのステータス値に上書き
	BASE:ARG:GET_BASESTATUS(LCOUNT:2) = AUTO_SPLIT_INT(汎用字:(LCOUNT:1),"_",1,GET_BASESTATUS(LCOUNT:2))
	;PRINTFORMW 現在 %GET_BASESTATUS(LCOUNT:2)% = {BASE:ARG:GET_BASESTATUS(LCOUNT:2)}
NEXT
VARSET CSTR:ARG:150,"",150,151
FOR LCOUNT:2,0,10
	SIF LCOUNT:2 > 0 && 汎用字:(LCOUNT:2) != ""
		CSTR:ARG:150 += "_："
	CSTR:ARG:150 += 汎用字:(LCOUNT:2)
NEXT
;;引継ぎ先のレベルが1未満なら該当グローバル変数をリセット
;TRYCALLFORM CLASS_ALTERNATE_STATUS_CONTROL_K812_%LCLASS:1%(ARG,0,"RETURN")
;SIF RESULT < 1
;	CALL RESET_ALL_CLASS_STATUS_K812
;FOR LCOUNT:2,0,FLAG:기본능력수
;	PRINTFORMW 현재 능력종은 %GET_BASESTATUS(LCOUNT:2)%입니다
;	;IF LCOUNT:2 == 0
;	;	;現クラスの変数に現在のレベルを確保させる
;	;	アーミヤクラステータス:(LCOUNT:0):(LCOUNT:2) = BASE:ARG:LV
;	;	;現在のレベルがクラスチェンジ先のレベル以上だった場合、現在のレベルをクラスチェンジ先の変数で確保したレベルに置き換える
;	;	SIF  アーミヤクラスステータス:(LCOUNT:0):0 >= アーミヤクラスステータス:(LCOUNT:1):(LCOUNT:2)
;	;		BASE:ARG:LV = アーミヤクラステータス:(LCOUNT:1):(LCOUNT:2)
;	;ENDIF
;	
;	;現クラスの変数に現在のステータス値を確保させる
;	;アーミヤクラスステータス:(LCOUNT:2) = BASE:ARG:(GET_BASESTATUS(LCOUNT:2))
;	CALLFORM CLASS_ALTERNATE_STATUS_CONTROL_K812_%LCLASS:0%(ARG,LCOUNT:2,"RETURN")
;	PRINTFORMW 현재 보존처 값은 {RESULT}입니다
;	CALLFORM CLASS_ALTERNATE_STATUS_CONTROL_K812_%LCLASS:0%(ARG,LCOUNT:2,"SET",BASE:ARG:(GET_BASESTATUS(LCOUNT:2)))
;	CALLFORM CLASS_ALTERNATE_STATUS_CONTROL_K812_%LCLASS:0%(ARG,LCOUNT:2,"RETURN")
;	PRINTFORMW 보존처의 값이 {RESULT}로 변경되었습니다
;	PRINTW 인수인계처의 능력치를 현재 상태에 덮어씁니다
;	CALLFORM CLASS_ALTERNATE_STATUS_CONTROL_K812_%LCLASS:1%(ARG,LCOUNT:2,"RETURN")
;	PRINTFORMW 현재 인수인계원의 값은 {RESULT}입니다
;	CALLFORM CLASS_ALTERNATE_STATUS_CONTROL_K812_%LCLASS:1%(ARG,LCOUNT:2,"RETURN")
;	BASE:ARG:(GET_BASESTATUS(LCOUNT:2)) = RESULT
;	PRINTFORMW 현 상태의 %GET_BASESTATUS(LCOUNT:2)%가 {BASE:ARG:(GET_BASESTATUS(LCOUNT:2))}로 변경되었습니다
;	;;現在のレベルがクラスチェンジ先のレベル以上だった場合、クラスチェンジ先のステータス値を現在のステータス値に変更する
;	;;SIF アーミヤクラスステータス:(LCOUNT:0):0 >= アーミヤクラスステータス:(LCOUNT:1):0
;	;SIF CLASS_ALTERNATE_STATUS_CONTROL_K812_CASTER(ARG,0,"RETURN") >= CLASS_ALTERNATE_STATUS_CONTROL_K812_GUARD(ARG,0,"RETURN")
;	;	BASE:ARG:(GET_BASESTATUS(LCOUNT:2)) = CLASS_ALTERNATE_STATUS_CONTROL_K812_GUARD(ARG,LCOUNT:2,"RETURN")
;	;	;BASE:ARG:(GET_BASESTATUS(LCOUNT:2)) = アーミヤクラスステータス:(LCOUNT:1):(LCOUNT:2)
;	;;IF BASE:ARG:(GET_BASESTATUS(LCOUNT:2)) <= 0 || BASE:ARG:LV < アーミヤクラスステータス:(LCOUNT:1):0
;	;IF BASE:ARG:(GET_BASESTATUS(LCOUNT:2)) <= 0 || BASE:ARG:LV < CLASS_ALTERNATE_STATUS_CONTROL_K812_GUARD(ARG,0,"RETURN")
;	;;交換した能力値が0以下orクラスチェンジ先のLVよりキャラLVが低ければクラスに応じた初期値を設定する
;	;	SELECTCASE LCOUNT:1
;	;		CASE 0
;	;		;術師
;	;			SELECTCASE LCOUNT:2
;	;				CASE 1
;	;					LCOUNT:3 = 1
;	;				CASE 2
;	;					LCOUNT:3 = 5
;	;				CASE 3
;	;					LCOUNT:3 = 5
;	;				CASE 4
;	;					LCOUNT:3 = 2
;	;				CASE 5
;	;					LCOUNT:3 = 5
;	;				CASE 6
;	;					LCOUNT:3 = 2
;	;			ENDSELECT
;	;		CASE 1
;	;		;前衛
;	;			SELECTCASE LCOUNT:2
;	;				CASE 1
;	;					LCOUNT:3 = 4
;	;				CASE 2
;	;					LCOUNT:3 = 2
;	;				CASE 3
;	;					LCOUNT:3 = 3
;	;				CASE 4
;	;					LCOUNT:3 = 4
;	;				CASE 5
;	;					LCOUNT:3 = 4
;	;				CASE 6
;	;					LCOUNT:3 = 3
;	;			ENDSELECT
;	;	ENDSELECT
;	;	BASE:ARG:(GET_BASESTATUS(LCOUNT:2)) = LCOUNT:3
;	;	;クラスチェンジ先のLVよりキャラLVが低ければクラスチェンジ先の初期値も設定しなおす
;	;	SIF BASE:ARG:LV < CLASS_ALTERNATE_STATUS_CONTROL_K812_GUARD(ARG,0,"RETURN")
;	;		CALLF CLASS_ALTERNATE_STATUS_CONTROL_K812_GUARD(ARG,LCOUNT:2,"SET",LCOUNT:3)
;	;		;アーミヤクラスステータス:(LCOUNT:1):(LCOUNT:2) = LCOUNT:3
;	;	LCOUNT:3 = 0
;	;ENDIF
;NEXT
;;ELSEIF BASE:ARG:LV < アーミヤクラスステータス:(LCOUNT:1):0
;;	FOR LCOUNT:2,0,FLAG:기본능력수
;;		;現クラスの変数に現在のステータス値を確保させる
;;		アーミヤクラステータス:(LCOUNT:0):(LCOUNT:2) = BASE:ARG:(GET_BASESTATUS(LCOUNT:2))
;;		;クラスに応じた初期値を設定する
;;		SELECTCASE LCOUNT:1
;;			CASE 0
;;			;術師
;;				SELECTCASE LCOUNT:2
;;					CASE 1
;;						LCOUNT:3 = 1
;;					CASE 2
;;						LCOUNT:3 = 5
;;					CASE 3
;;						LCOUNT:3 = 5
;;					CASE 4
;;						LCOUNT:3 = 2
;;					CASE 5
;;						LCOUNT:3 = 5
;;					CASE 6
;;						LCOUNT:3 = 2
;;				ENDSELECT
;;			CASE 1
;;			;前衛
;;				SELECTCASE LCOUNT:2
;;					CASE 1
;;						LCOUNT:3 = 4
;;					CASE 2
;;						LCOUNT:3 = 2
;;					CASE 3
;;						LCOUNT:3 = 3
;;					CASE 4
;;						LCOUNT:3 = 4
;;					CASE 5
;;						LCOUNT:3 = 4
;;					CASE 6
;;						LCOUNT:3 = 3
;;				ENDSELECT
;;		ENDSELECT
;;		BASE:ARG:(GET_BASESTATUS(LCOUNT:2)) = LCOUNT:3
;;		アーミヤクラステータス:(LCOUNT:1):(LCOUNT:2) = LCOUNT:3
;;		LCOUNT:3 = 0
;;	NEXT
;;ENDIF
;ズレによる事故が起こると面倒なので専用技1と専用技2をスキル枠1とスキル枠2にソートしなおす
IF HAVE_SKILL(ARG,[[스킬:전용기1]])
	SWAP ABL:ARG:스킬1,ABL:ARG:@"스킬{HAVE_SKILL(ARG,[[스킬:전용기1]],1)}"
ENDIF
IF HAVE_SKILL(ARG,[[스킬:전용기2]])
	SWAP ABL:ARG:스킬2,ABL:ARG:@"스킬{HAVE_SKILL(ARG,[[스킬:전용기2]],1)}"
ENDIF
;スキル欄、及び習得スキルをクラス毎に再セット
SPLIT CSTR:ARG:151,"：",汎用字
FOR LCOUNT:2,1,FLAG:스킬수+1
	SIF ABL:ARG:@"스킬{LCOUNT:2}" == [[스킬:전용기1]] || ABL:ARG:@"스킬{LCOUNT:2}" == [[스킬:전용기2]]
		CONTINUE
	;現クラスの所有スキルをSPLITで確保した文字列に上書き
	汎用字:(LCOUNT:0) = %CHANGE_SPLIT(汎用字:(LCOUNT:0),"_",1,@"스킬{LCOUNT:2}",TOSTR(ABL:ARG:@"스킬{LCOUNT:2}"))%
	;CALLFORM CLASS_ALTERNATE_STATUS_CONTROL_K812_%LCLASS:0%(ARG,LCOUNT:2 + 6,"SET",ABL:ARG:@"스킬{LCOUNT:2}")
	;アーミヤクラスステータス:(LCOUNT:0):(LCOUNT:2 + 6) = ABL:ARG:@"스킬{LCOUNT:2}"
	;引継ぎ先のSPLITリストからスキルを抽出
	ABL:ARG:@"스킬{LCOUNT:2}" = AUTO_SPLIT_INT(汎用字:(LCOUNT:1),"_",1,@"스킬{LCOUNT:2}")
	;CALLFORM CLASS_ALTERNATE_STATUS_CONTROL_K812_%LCLASS:1%(ARG,LCOUNT:2 + 6,"RETURN")
	;ABL:ARG:@"스킬{LCOUNT:2}" = RESULT
	;ABL:ARG:@"스킬{LCOUNT:2}" = アーミヤクラスステータス:(LCOUNT:1):(LCOUNT:2 + 6)
	CALL SKILL_LEARNSET_UPDATE_K812,ARG,LCOUNT:1
NEXT
VARSET CSTR:ARG:151,"",151,152
FOR LCOUNT:2,0,10
	SIF LCOUNT:2 > 0 && 汎用字:(LCOUNT:2) != ""
		CSTR:ARG:151 += "_："
	CSTR:ARG:151 += 汎用字:(LCOUNT:2)
NEXT
SPLIT CSTR:ARG:153,"：",汎用字
FOR LCOUNT:2,0,FLAG:상성수
	;現クラスの相性値を確保
	汎用字:(LCOUNT:0) = %CHANGE_SPLIT(汎用字:(LCOUNT:0),"_",1,GET_TYPE(LCOUNT:2),TOSTR(BASE:ARG:GET_TYPE(LCOUNT:2)))%
	;CSTR:153に保存されてる相性値を抽出
	BASE:ARG:GET_TYPE(LCOUNT:2) = AUTO_SPLIT_INT(汎用字:(LCOUNT:1),"_",1,GET_TYPE(LCOUNT:2))
	SIF GET_TYPE(LCOUNT:2) == "만능" && BASE:ARG:GET_TYPE(LCOUNT:2) < 100
		BASE:ARG:GET_TYPE(LCOUNT:2) = 100
NEXT
VARSET CSTR:ARG:153,"",153,154
FOR LCOUNT:2,0,10
	SIF LCOUNT:2 > 0 && 汎用字:(LCOUNT:2) != ""
		CSTR:ARG:153 += "_："
	CSTR:ARG:153 += 汎用字:(LCOUNT:2)
NEXT
;識別に使うCSTR,CFLAGを変更
;------------------------------------------------------------
;継承素質などの初期化
FOR LCOUNT:2,0,22
	TALENT:ARG:GET_SUCCESSION(LCOUNT:2) = 0
NEXT
TALENT:ARG:무기 = 0
FOR LCOUNT:2,0,6
	TALENT:ARG:(TALENTNAME:(GETNUM(TALENT,"우애")+LCOUNT:2)) = 0
	;TALENT:ARG:우애 = 0
	;TALENT:ARG:영맹 = 0
	;TALENT:ARG:우둔 = 0
	;TALENT:ARG:교만 = 0
	;TALENT:ARG:교활 = 0
	;TALENT:ARG:냉정 = 0
NEXT
;専用技の分まで変数用意するの面倒だからスキル1は初期技に固定するね…
SELECTCASE LCOUNT:1
	CASE 0
		CSTR:ARG:101 = 아미야
		CSTR:ARG:전용기1 = 戦術詠唱γ
		CSTR:ARG:전용기2 = アブソープション
		TALENT:ARG:주살 = 1
		TALENT:ARG:정신 = 1
		TALENT:ARG:지변 = 1
		TALENT:ARG:만능 = 1
		TALENT:ARG:냉정 = 1
		CSTR:LOCAL:46 = 전투에서의 성능은 순 매직 유저.
		CSTR:LOCAL:47 = 베이스가 되는 원작의 키마이라와는 전혀 다른 스킬 습득 테이블을 지니고 있으며、 환장이 가능한 전용기와 해석되지 않은 전용기 두 개를 습득하고 있다.
		CSTR:LOCAL:48 = 전용기는 정통적인 자기강화계이지만、 스킬강화를 행함으로서 독자적인 효과를 지니는 성능으로 진화한다.
		CSTR:LOCAL:49 = 그 성질상、 저위력의 연속 공격계나 범위공격계의 마법보다는 고위력의 단독개체 마법기술을 장기로 삼는다.
	CASE 1
		CSTR:ARG:101 = 아미야（전위）
		CSTR:ARG:전용기1 = 影霄ㆍ奔夜
		CSTR:ARG:전용기2 = 蒼き怒火
		TALENT:ARG:검격 = 1
		TALENT:ARG:화염 = 1
		TALENT:ARG:주살 = 1
		TALENT:ARG:만능 = 1
		TALENT:ARG:무기 = 1
		TALENT:ARG:영맹 = 1
		CSTR:ARG:46 = 전투에서의 성능은 지원도 가능한 물리 어택커。
		CSTR:ARG:47 = 클래스 체인지 함으로써 술사와는 다른 스킬 습득 테이블을 가지고、전용 기술도 클래스 체인지처에 맞게 변경되었다。
		CSTR:ARG:48 = 전용기는 자기 강화를 하는 것과는 별개로 패널티를 받는 대신、큰 기술을 발휘하면서 강력한 지원 효과를 부여하는 물건이 존재한다。
		CSTR:ARG:49 = 술사와는 달리、물리공격이면 단발위력을 중시하지 않아도 되기 때문에、구성에 비교적 자유로운 성능을 보이고 있다。
ENDSELECT
;影霄ㆍ奔夜が習得されてない = 初クラスチェンジなので影霄ㆍ奔夜と影霄ㆍ絶影のスキルレベルを1に設定
IF CSTR:ARG:105 == ""
	CSTR:ARG:105 = 1
	CSTR:ARG:106 = 1
ENDIF
;------------------------------------------------------------
CALL SYNC_STATUS,ARG
CALL CHECK_LEVEL_UP,ARG


@SKILL_LEARNSET_UPDATE_K812,ARG,ARG:1,ARGS = ""
#LOCALSSIZE 1
#DIM LCOUNT,2
#DIM SKILL_TABLE_NUM
#DIMS 汎用字,10
SKILL_TABLE_NUM = -1
;習得スキルの更新処理
;ARG = 使用キャラ
;ARG:1 = 対応するクラス
;ARGS 昇華経由だった場合、とりあえず何か書いておく事で昇華用の処理にする and 引継ぎ周回時の処理も担当
;術師系なら一桁目、前衛なら二桁目のビットを使用
SIF ARGS == "昇華１" || ARGS == "昇華２" || ARG:1 == 0
	SKILL_TABLE_NUM = 0
SIF ARG:1 == 1
	SKILL_TABLE_NUM = 1
SIF SKILL_TABLE_NUM == -1
	RETURN
;習得スキルと習得スキルLVの表を作成
LOCALS = _『CASTER』_스킬1_2403_8_스킬2_2011_14_스킬3_1237_18_스킬4_1424_24_스킬5_1502_28_스킬6_2404_34_스킬7_2001_38_스킬8_2411_45_스킬9_2012_50_스킬10_1207_58_스킬11_1420_60_스킬12_1503_62_스킬13_2405_64_스킬14_2002_66_스킬15_2412_68_스킬16_2013_70_스킬17_2008_74_스킬18_2413_77_스킬19_2437_80_：_『GUARD』_스킬1_14_8_스킬2_763_14_스킬3_1438_18_스킬4_511_24_스킬5_13_28_스킬6_719_34_스킬7_534_38_스킬8_5_45_스킬9_2449_50_스킬10_729_58_스킬11_38_60_스킬12_2407_62_스킬13_29_64_스킬14_2012_66_스킬15_6_68_스킬16_2067_70_스킬17_2484_74_스킬18_525_77_스킬19_2097_80_
SPLIT LOCALS,"：",汎用字
;習得済みフラグが立ってたら終了
SIF GETBIT(TOINT(CSTR:ARG:152),SKILL_TABLE_NUM) && ARGS != "周回処理"
	RETURN
;SIF GETBIT(アーミヤ習得スキルテーブル適用フラグ,SKILL_TABLE_NUM)
;	RETURN
FOR LCOUNT,1,20
	;昇華１から呼び出されたら1~8番目の習得スキルは跳ばす
	SIF ARGS == "昇華１" && LCOUNT < 9
		CONTINUE
	;昇華２から呼び出されたら9~16番目の習得スキルは跳ばす
	SIF ARGS == "昇華２" && LCOUNT < 17
		CONTINUE
	IF ABL:ARG:@"습득LV{LCOUNT}" < 1 && (LCOUNT < 9 || CSTR:ARG:103 != "" && LCOUNT < 17 || CSTR:ARG:104 != "")
		ABL:ARG:@"습득LV{LCOUNT}" = AUTO_SPLIT_INT(汎用字:(SKILL_TABLE_NUM),"_",2,@"스킬{LCOUNT}")
		ABL:ARG:@"습득스킬{LCOUNT}" = AUTO_SPLIT_INT(汎用字:(SKILL_TABLE_NUM),"_",1,@"스킬{LCOUNT}")
		;SELECTCASE LCOUNT
		;	CASE 1
		;		LCOUNT:1 = 8
		;	CASE 2
		;		LCOUNT:1 = 14
		;	CASE 3
		;		LCOUNT:1 = 18
		;	CASE 4
		;		LCOUNT:1 = 24
		;	CASE 5
		;		LCOUNT:1 = 28
		;	CASE 6
		;		LCOUNT:1 = 34
		;	CASE 7
		;		LCOUNT:1 = 38
		;	CASE 8
		;		LCOUNT:1 = 45
		;	CASE 9
		;		SIF CSTR:ARG:103 != ""
		;			LCOUNT:1 = 50
		;	CASE 10
		;		SIF CSTR:ARG:103 != ""
		;			LCOUNT:1 = 58
		;	CASE 11
		;		SIF CSTR:ARG:103 != ""
		;			LCOUNT:1 = 60
		;	CASE 12
		;		SIF CSTR:ARG:103 != ""
		;			LCOUNT:1 = 62
		;	CASE 13
		;		SIF CSTR:ARG:103 != ""
		;			LCOUNT:1 = 64
		;	CASE 14
		;		SIF CSTR:ARG:103 != ""
		;			LCOUNT:1 = 66
		;	CASE 15
		;		SIF CSTR:ARG:103 != ""
		;			LCOUNT:1 = 68
		;	CASE 16
		;		SIF CSTR:ARG:103 != ""
		;			LCOUNT:1 = 70
		;	CASE 17
		;		SIF CSTR:ARG:104 != ""
		;			LCOUNT:1 = 74
		;	CASE 18
		;		SIF CSTR:ARG:104 != ""
		;			LCOUNT:1 = 77
		;	CASE 19
		;		SIF CSTR:ARG:104 != ""
		;			LCOUNT:1 = 80
		;ENDSELECT
		;ABL:ARG:@"습득LV{LCOUNT}" = LCOUNT:1
		;LCOUNT:1 = 0
	ENDIF
	;IF !GETBIT(アーミヤ習得スキルテーブル適用フラグ,SKILL_TABLE_NUM)
		;SELECTCASE ARG:1
		;	CASE 0
		;	;術師
		;		SELECTCASE LCOUNT
		;			CASE 1
		;				LCOUNT:1 = 2403
		;				;一分の魔脈
		;			CASE 2
		;				LCOUNT:1 = 2011
		;				;ネクロㆍドグマ
		;			CASE 3
		;				LCOUNT:1 = 1237
		;				;プリンパダイン
		;			CASE 4
		;				LCOUNT:1 = 1424
		;				;呪いの言葉
		;			CASE 5
		;				LCOUNT:1 = 1502
		;				;マグナス
		;			CASE 6
		;				LCOUNT:1 = 2404
		;				;二分の魔脈
		;			CASE 7
		;				LCOUNT:1 = 2001
		;				;メギド
		;			CASE 8
		;				LCOUNT:1 = 2411
		;				;気功（小）
		;			;--------------------------
		;			;ここからは昇華１を達成している場合のみ習得する
		;			CASE 9
		;				SIF CSTR:ARG:103 != ""
		;					LCOUNT:1 = 2012
		;				;メギドクロス
		;			CASE 10
		;				SIF CSTR:ARG:103 != ""
		;					LCOUNT:1 = 1207
		;				;メガストライク
		;			CASE 11
		;				SIF CSTR:ARG:103 != ""
		;					LCOUNT:1 = 1420
		;				;エイガオン
		;			CASE 12
		;				SIF CSTR:ARG:103 != ""
		;					LCOUNT:1 = 1503
		;				;マグダイン
		;			CASE 13
		;				SIF CSTR:ARG:103 != ""
		;					LCOUNT:1 = 2405
		;				;三分の魔脈
		;			CASE 14
		;				SIF CSTR:ARG:103 != ""
		;					LCOUNT:1 = 2002
		;				;メギドラ
		;			CASE 15
		;				SIF CSTR:ARG:103 != ""
		;					LCOUNT:1 = 2412
		;				;気功（中）
		;			CASE 16
		;				SIF CSTR:ARG:103 != ""
		;					LCOUNT:1 = 2013
		;				;吸血
		;			;--------------------------
		;			;ここからは昇華２を達成している場合のみ習得する
		;			CASE 17
		;				SIF CSTR:ARG:104 != ""
		;					LCOUNT:1 = 2008
		;				;大いなるロゴス
		;			CASE 18
		;				SIF CSTR:ARG:104 != ""
		;					LCOUNT:1 = 2413
		;				;気功（大）
		;			CASE 19
		;				SIF CSTR:ARG:104 != ""
		;					LCOUNT:1 = 2437
		;				;魔術の素養
		;		ENDSELECT
		;		IF LCOUNT:1 > 0
		;			ABL:ARG:@"습득스킬{LCOUNT}" = LCOUNT:1
		;		ELSE
		;			ABL:ARG:@"습득LV{LCOUNT}" = 0
		;		ENDIF
		;		LCOUNT:1 = 0
		;	CASE 1
		;	;前衛
		;		SELECTCASE LCOUNT
		;			CASE 1
		;				LCOUNT:1 = 14
		;				;一文字斬り
		;			CASE 2
		;				LCOUNT:1 = 763
		;				;ヘルファイヤー
		;			CASE 3
		;				LCOUNT:1 = 1438
		;				;ドムディ
		;			CASE 4
		;				LCOUNT:1 = 511
		;				;気合
		;			CASE 5
		;				LCOUNT:1 = 13
		;				;ツインスラッシュ
		;			CASE 6
		;				LCOUNT:1 = 719
		;				;火砕烈風破
		;			CASE 7
		;				LCOUNT:1 = 534
		;				;切り落とし
		;			CASE 8
		;				LCOUNT:1 = 5
		;				;唐竹割り
		;			CASE 9
		;				LCOUNT:1 = 2449
		;				;見切り
		;			CASE 10
		;				LCOUNT:1 = 729
		;				;焼灼拳
		;			CASE 11
		;				LCOUNT:1 = 38
		;				;武者車
		;			CASE 12
		;				LCOUNT:1 = 2407
		;				;不屈の闘志
		;			CASE 13
		;				LCOUNT:1 = 29
		;				;天驚地爆断
		;			CASE 14
		;				LCOUNT:1 = 2012
		;				;メギドクロス
		;			CASE 15
		;				LCOUNT:1 = 6
		;				;虚空斬波
		;			CASE 16
		;				LCOUNT:1 = 2067
		;				;終わる世界
		;			CASE 17
		;				LCOUNT:1 = 2484
		;				;ダッジカウンター
		;			CASE 18
		;				LCOUNT:1 = 525
		;				;ヒートライザ
		;			CASE 19
		;				LCOUNT:1 = 2097
		;				;極光大破斬
		;		ENDSELECT
		;		ABL:ARG:@"습득스킬{LCOUNT}" = LCOUNT:1
		;		LCOUNT:1 = 0
		;ENDSELECT
	;ELSE
	;	BREAK
	;	;ABL:ARG:@"습득LV{LCOUNT}" = 0
	;	;ABL:ARG:@"습득스킬{LCOUNT}" = 0
	;ENDIF
NEXT
LCOUNT = 0
SETBIT LCOUNT,SKILL_TABLE_NUM
CSTR:ARG:152 = %TOSTR(LCOUNT)%
;SETBIT アーミヤ習得スキルテーブル適用フラグ,SKILL_TABLE_NUM

;@CLASS_ALTERNATE_STATUS_CONTROL_K812_CASTER,ARG,ARG:1,ARGS,ARG:2
;;ARG キャラ番号
;;ARG:1 参照する能力の種別orスキル
;;ARGS 行う命令 現状は"ADD","SET","RETURN"などが可能
;;ARG:2 加算、設定する値など
;SELECTCASE ARGS
;	CASE "SET"
;		アーミヤクラスステータス術師:(ARG:1) = ARG:2
;	CASE "ADD"
;		アーミヤクラスステータス術師:(ARG:1) += ARG:2
;	CASE "RETURN"
;		RETURN アーミヤクラスステータス術師:(ARG:1)
;ENDSELECT
;RETURN

;@CLASS_ALTERNATE_STATUS_CONTROL_K812_GUARD,ARG,ARG:1,ARGS,ARG:2
;;ARG キャラ番号
;;ARG:1 参照する能力の種別orスキル
;;ARGS 行う命令 現状は"ADD","SET","RETURN"などが可能
;;ARG:2 加算、設定する値など
;SELECTCASE ARGS
;	CASE "SET"
;		アーミヤクラスステータス前衛:(ARG:1) = ARG:2
;	CASE "ADD"
;		アーミヤクラスステータス前衛:(ARG:1) += ARG:2
;	CASE "RETURN"
;		RETURN アーミヤクラスステータス前衛:(ARG:1)
;ENDSELECT
;RETURN

@RESET_ALL_CLASS_STATUS_K812
#DIM LCOUNT
;;アーミヤのクラスチェンジのグローバル変数をスキル以外初期値に戻す処理
;VARSET LCOUNT
;ついでだからスキル習得済みフラグもリセットだ！
;VARSET 
LCOUNT = FINDCHARA(CSTR:종족명,"카우투스")
SIF LCOUNT < 0 || NO:LCOUNT != 812
	RETURN 0
CSTR:LCOUNT:150 = _『CASTER』_LV_0001_힘_0001_지헤_0005_마력_0005_인내력_0002_속도_0002_운_0002_：_『GUARD』_LV_0001_힘_0004_지혜_0002_마력_0003_인내력_0004_속도_0004_운_0003
VARSET CSTR:LCOUNT:152,"",152,153
;CSTR:ARG:151 = _『CASTER』_스킬1_2403_스킬2_2011_스킬3_1237_스킬4_1424_스킬5_1502_스킬6_2404_스킬7_2001_스킬8_2411_스킬9_2012_스킬10_1207_스킬11_1420_스킬12_1503_스킬13_2405_스킬14_2002_스킬15_2412_스킬16_2013_스킬17_2008_스킬18_2413_스킬19_2437_：_『GUARD』_스킬1_14_스킬2_763_스킬3_1438_스킬4_511_스킬5_13_스킬6_719_스킬7_534_스킬8_5_스킬9_2449_스킬10_729_스킬11_38_스킬12_2407_스킬13_29_스킬14_2012_스킬15_6_스킬16_2067_스킬17_2484_스킬18_525_스킬19_2097_
;FOR LCOUNT:0,0,2
;	SELECTCASE LCOUNT:0
;		CASE 0
;			FOR LCOUNT:1,0,FLAG:기본능력수
;				SELECTCASE LCOUNT:1
;					CASE 0
;						LCOUNT:2 = 1
;					CASE 1
;						LCOUNT:2 = 1
;					CASE 2
;						LCOUNT:2 = 5
;					CASE 3
;						LCOUNT:2 = 5
;					CASE 4
;						LCOUNT:2 = 2
;					CASE 5
;						LCOUNT:2 = 5
;					CASE 6
;						LCOUNT:2 = 2
;				ENDSELECT
;				アーミヤクラスステータス術師:(LCOUNT:1) = LCOUNT:2
;			NEXT
;		CASE 1
;			FOR LCOUNT:1,0,FLAG:기본능력수
;				SELECTCASE LCOUNT:1
;					CASE 0
;						LCOUNT:2 = 1
;					CASE 1
;						LCOUNT:2 = 4
;					CASE 2
;						LCOUNT:2 = 2
;					CASE 3
;						LCOUNT:2 = 3
;					CASE 4
;						LCOUNT:2 = 4
;					CASE 5
;						LCOUNT:2 = 4
;					CASE 6
;						LCOUNT:2 = 3
;				ENDSELECT
;				アーミヤクラスステータス前衛:(LCOUNT:1) = LCOUNT:2
;			NEXT
;	ENDSELECT
;NEXT

@EVENT_BATTLE_ACTEND_INDIVIDUALEVENT_K812
SIF FINDCHARA(CSTR:사고패턴,"TALULAH") > 0
	CALL EVENT_BATTLE_ACTEND_INDIVIDUALEVENT_K812_1_AN

@EVENT_BATTLE_TURNEND_INDIVIDUALEVENT_K812
SIF FINDCHARA(CSTR:사고패턴,"帝国砲撃誘導機") > 0
	CALL EVENT_BATTLE_TURNEND_INDIVIDUALEVENT_K812_1_AN
